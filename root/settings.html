<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Settings</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet" />

  <style>
    body {
      background: #f1f3f6;
      font-family: "Poppins", sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }

    .settings-card {
      background: #fff;
      border-radius: 20px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
      width: 90%;
      max-width: 400px;
      overflow: hidden;
      padding: 25px;
      position: relative;
    }

    .top-bar {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 25px;
    }

    .top-bar button {
      border: none;
      background: none;
      font-size: 22px;
      color: #1a73e8;
    }

    .top-bar h5 {
      margin: 0;
      color: #333;
      font-weight: 600;
    }

    .profile-pic-container {
      text-align: center;
      margin-bottom: 20px;
    }

    .profile-pic-container img {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      border: 3px solid #1a73e8;
      object-fit: cover;
      cursor: pointer;
    }

    .profile-pic-container p {
      color: #666;
      font-size: 14px;
      margin-top: 8px;
    }

    label {
      font-weight: 500;
      margin-top: 10px;
      color: #333;
    }

    input {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      outline: none;
      margin-top: 5px;
      margin-bottom: 15px;
      transition: border-color 0.3s;
    }

    input:focus {
      border-color: #1a73e8;
    }

    .save-btn {
      background: #1a73e8;
      color: #fff;
      border: none;
      border-radius: 10px;
      padding: 10px 0;
      width: 100%;
      font-weight: 500;
      transition: all 0.3s;
    }

    .save-btn:hover {
      background: #1669c1;
    }
  </style>
</head>

<body>
  <div class="settings-card">
    <div class="top-bar">
      <button onclick="window.location.href='profile.html'"><i class="bi bi-arrow-left-circle"></i></button>
      <h5>Settings</h5>
    </div>

    <div class="profile-pic-container">
      <img id="profilePreview" src="https://cdn-icons-png.flaticon.com/512/847/847969.png" alt="Profile Picture" />
      <input type="file" id="profileImageInput" accept="image/*" style="display:none;" />
      <p>Tap to change picture</p>
    </div>

    <form id="settingsForm">
      <label for="name">Full Name</label>
      <input type="text" id="name" placeholder="Enter your name" required />

      <label for="email">Email Address</label>
      <input type="email" id="email" placeholder="Enter your email" required />

      <button type="submit" class="save-btn">Save Changes</button>
    </form>
  </div>

  <script>
    const profilePreview = document.getElementById("profilePreview");
    const profileImageInput = document.getElementById("profileImageInput");

    // Load existing user info
    const user = JSON.parse(localStorage.getItem("user"));
    if (user) {
      document.getElementById("name").value = user.name || "";
      document.getElementById("email").value = user.email || "";
      if (user.picture) profilePreview.src = user.picture;
    }

    // Click on image to select file
    profilePreview.addEventListener("click", () => {
      profileImageInput.click();
    });

    // Preview selected image
    profileImageInput.addEventListener("change", (e) => {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = () => {
          profilePreview.src = reader.result;
        };
        reader.readAsDataURL(file);
      }
    });

    // Save changes
    document.getElementById("settingsForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const name = document.getElementById("name").value.trim();
      const email = document.getElementById("email").value.trim();
      const picture = profilePreview.src;

      const updatedUser = { ...user, name, email, picture };
      localStorage.setItem("user", JSON.stringify(updatedUser));

      alert("âœ… Profile updated successfully!");
      window.location.href = "profile.html";
    });
  </script>
</body>
</html>